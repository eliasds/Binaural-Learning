<!DOCTYPE html>
<html>
<head>
  <title>My Page</title>
</head>
<body>
  <h1>Tone.js Example 12</h1>
  <button id="playButton">Play</button>
  <button id="pauseButton">Pause</button>
  <div id="progressBar" style="width: 0%; background-color: gray;">&nbsp;</div>
  <script src="https://unpkg.com/tone"></script>
  <script>
    // Create a new Buffer from the audio file
    const buffer = new Tone.Buffer("SongA.mp3", () => {
      console.log("Audio file loaded");
    });

    // Update the progress bar during loading
    Tone.Transport.scheduleRepeat((time) => {
      const progress = buffer.loaded / buffer.duration;
      const progressBar = document.getElementById("progressBar");
      progressBar.style.width = `${progress * 100}%`;
      if (progress === 1) {
        console.log("Loading complete");
        Tone.Transport.stop();
      }
    }, "16n");

    // Create a new Player from the Buffer and connect it to the destination
    const songA = new Tone.Player(buffer).toDestination();
    //const songA = new Tone.Player(buffer);
    //songA.toDestination();

/*
    // Create a new Player and load the audio file
    const songA = new Tone.Player(buffer);
    
    // Create a new GainNode
    const gainA = new Tone.Gain();
    
    // Create a new Mono node
    const monoA = new Tone.Mono();

    // Create a new Panner node with position set to left
    const pannerA = new Tone.Panner(-1)
    
    // Connect the audio file to the GainNode
    songA.connect(gainA);

    // Connect the GainNode to the Mono node
    gainA.connect(monoA);

    // Connect the Mono node to the Panner node
    monoA.connect(pannerA);

    // Connect the Panner node to the left channel of the destination node using Tone.Destination.Left
    pannerA.connect(Tone.Destination.left);
/*
    
    
    // Add event listeners to the play and pause buttons
    const playButton = document.getElementById("playButton");
    const pauseButton = document.getElementById("pauseButton");
    playButton.addEventListener("click", () => {
      songA.start();
      Tone.Transport.start();
    });
    pauseButton.addEventListener("click", () => {
      songA.stop();
      Tone.Transport.stop();
    });
  </script>
</body>
</html>
